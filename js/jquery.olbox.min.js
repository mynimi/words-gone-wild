/*! Olbox Lightbox Plugin | Myriam Frisano http://halfapx.com | https://github.com/mynimi/jquery-olbox */
!function(o){o.fn.olbox=function(a){function e(a){var e=null,l=null,d=null;if(i.debug===!0&&console.log("media is "+a),i.includeVisualNavigator||i.includeKeyNavigator){var n=t.indexOf(a),r=t[n-1],b=t[n+1];void 0===r&&(r=t[t.length-1]),n+1==t.length&&(b=t[0]),i.debug===!0&&(console.log("prev "+r),console.log("next "+b))}if(a.includes(".jpg",".png",".gif",".svg")?(e=!0,l=!1):(l=!0,e=!1),l)if(d=!!a.includes("<iframe"))o(".olbox-media").remove(),o("body").append('<div class="olbox-media iframe"></div>'),o(".olbox-media.iframe").append(a);else{o(".olbox-media").remove(),o("body").append('<div class="olbox-media iframe"></div>'),o(".olbox-media").append('<div class="olbox-iframe-wrapper"></div>');var v=100;o(".olbox-iframe-wrapper").css({width:"100%",padding:i.iframeRatioHeight/i.iframeRatioWidth*v+"% 0 0 0"}),o(".olbox-iframe-wrapper").append('<iframe src="'+a+'" allowfullscreen></iframe>')}e&&(o(".olbox-img").length?o(".olbox-img").attr("src",a):o("body").append('<div class="olbox-media"><img src="'+a+'" class="olbox-img"></div>')),o(".olbox-loader").length||o("body").append('<div class="olbox-loader">Loading</div>'),o(".olbox-shadow").length||o("body").append('<div class="olbox-shadow"></div>'),o(".olbox-open").length||o("body").append('<div class="olbox-open"></div>'),(i.includeVisualNavigator||i.includeKeyNavigator)&&(o(".olbox-prev[data-"+i.dataAttribute+"-prev]").length?o(".olbox-prev").data(i.dataAttribute+"-prev",r):(o("olbox-nav").remove(),o("body").append("<div data-"+i.dataAttribute+'-prev="'+r+'" class="olbox-nav olbox-prev"'+(i.includeVisualNavigator===!1?'style="display: none;"':"")+">prev</div>")),o(".olbox-next[data-"+i.dataAttribute+"-next]").length?o(".olbox-next").data(i.dataAttribute+"-next",b):(o("olbox-nav").remove(),o("body").append("<div data-"+i.dataAttribute+'-next="'+b+'" class="olbox-nav olbox-next"'+(i.includeVisualNavigator===!1?'style="display: none;"':"")+">next</div>")))}var i=o.extend({iframeRatioWidth:16,iframeRatioHeight:9,includeVisualNavigator:!0,includeKeyNavigator:!0,dataAttribute:"olbox",debug:!1},a),t=[];return(i.includeVisualNavigator||i.includeKeyNavigator)&&this.each(function(){var a=o(this).data(i.dataAttribute);t.push(a)}),i.debug===!0&&console.log(t),this.unbind("click").bind("click",function(){var a=o(this).data(i.dataAttribute);e(a)}),o("body").on("click",".olbox-open",function(){o(".olbox-shadow, .olbox-media, .olbox-open, .olbox-nav, .olbox-loader").remove()}),(i.includeVisualNavigator||i.includeKeyNavigator)&&(o("body").on("click",".olbox-prev[data-"+i.dataAttribute+"-prev]",function(){var a=o(this).data(i.dataAttribute+"-prev");e(a)}),o("body").on("click",".olbox-next[data-"+i.dataAttribute+"-next]",function(){var a=o(this).data(i.dataAttribute+"-next");console.log("next is"),e(a)})),o(document).keyup(function(a){27===a.which&&o(".olbox-shadow, .olbox-media, .olbox-open, .olbox-nav, .olbox-loader").remove(),i.includeKeyNavigator&&(39===a.which&&o(".olbox-next[data-"+i.dataAttribute+"-next]").trigger("click"),37===a.which&&o(".olbox-prev[data-"+i.dataAttribute+"-prev]").trigger("click"))}),this}}(jQuery);